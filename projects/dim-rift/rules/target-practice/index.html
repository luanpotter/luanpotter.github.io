<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Dimensional Rift</title>
    <link rel="icon" type="image/x-icon" href="/projects/dim-rift/assets/icons/rift.png">
    <link rel="stylesheet" href="/projects/dim-rift/bundle.css">
</head>

<body>
    <header>
        <h1><a href="/projects/dim-rift/">Dimensional Rift</a></h1>
        <a href="/projects/dim-rift/">Home</a> |
        <a href="/projects/dim-rift/introduction">Introduction</a> |
        <a href="/projects/dim-rift/rules">Rules</a> |
        <a href="/projects/dim-rift/wiki">Wiki</a> |
        <a href="/projects/dim-rift/references">References</a> |
        <a href="https://forms.gle/w8wBSuq8a1nRRBc78">Contact</a>
    </header>
    <main>
        
        <h1 id="interactive-target-practice" tabindex="-1">Interactive Target Practice</h1>
<p>Arrow targeting is a key part of <strong>Dimensional Rift</strong>. The interactive application below is intended to assist in understanding the mechanics. For a more detailed explanation, see the <a href="/projects/dim-rift/wiki/Targeting">Targeting</a> page.</p>
<hr>
<div class="target-grid"><div class="target-row"><div class="target-zone" data-grid-id="1-1"></div><div class="target-zone" data-grid-id="1-2"></div><div class="target-zone" data-grid-id="1-3"></div><div class="target-zone" data-grid-id="1-4"></div><div class="target-zone" data-grid-id="1-5"></div><div class="target-zone" data-grid-id="1-6"></div><div class="target-zone" data-grid-id="1-7"></div></div><div class="target-row"><div class="target-zone" data-grid-id="2-1"></div><div class="target-zone" data-grid-id="2-2"></div><div class="target-zone" data-grid-id="2-3"></div><div class="target-zone" data-grid-id="2-4"></div><div class="target-zone" data-grid-id="2-5"></div><div class="target-zone" data-grid-id="2-6"></div><div class="target-zone" data-grid-id="2-7"></div></div><div class="target-row"><div class="target-zone" data-grid-id="3-1"></div><div class="target-zone" data-grid-id="3-2"></div><div class="target-zone" data-grid-id="3-3"></div><div class="target-zone" data-grid-id="3-4"></div><div class="target-zone" data-grid-id="3-5"></div><div class="target-zone" data-grid-id="3-6"></div><div class="target-zone" data-grid-id="3-7"></div></div><div class="target-row"><div class="target-zone" data-grid-id="4-1"></div><div class="target-zone" data-grid-id="4-2"></div><div class="target-zone" data-grid-id="4-3"></div><div class="target-center">
            <div class="arrows-row">
                <p class="target-arrow ↖-single" data-arrow-id="↖">↖</p>
                <p class="target-arrow ↑-single" data-arrow-id="↑">↑</p>
                <p class="target-arrow ↗-single" data-arrow-id="↗">↗</p>
            </div>
            <div class="arrows-row">
                <p class="target-arrow ←-single" data-arrow-id="←">←</p>
                <p>·</p>
                <p class="target-arrow →-single" data-arrow-id="→">→</p>
            </div>
            <div class="arrows-row">
                <p class="target-arrow ↙-single" data-arrow-id="↙">↙</p>
                <p class="target-arrow ↓-single" data-arrow-id="↓">↓</p>
                <p class="target-arrow ↘-single" data-arrow-id="↘">↘</p>
            </div>
        </div><div class="target-zone" data-grid-id="4-5"></div><div class="target-zone" data-grid-id="4-6"></div><div class="target-zone" data-grid-id="4-7"></div></div><div class="target-row"><div class="target-zone" data-grid-id="5-1"></div><div class="target-zone" data-grid-id="5-2"></div><div class="target-zone" data-grid-id="5-3"></div><div class="target-zone" data-grid-id="5-4"></div><div class="target-zone" data-grid-id="5-5"></div><div class="target-zone" data-grid-id="5-6"></div><div class="target-zone" data-grid-id="5-7"></div></div><div class="target-row"><div class="target-zone" data-grid-id="6-1"></div><div class="target-zone" data-grid-id="6-2"></div><div class="target-zone" data-grid-id="6-3"></div><div class="target-zone" data-grid-id="6-4"></div><div class="target-zone" data-grid-id="6-5"></div><div class="target-zone" data-grid-id="6-6"></div><div class="target-zone" data-grid-id="6-7"></div></div><div class="target-row"><div class="target-zone" data-grid-id="7-1"></div><div class="target-zone" data-grid-id="7-2"></div><div class="target-zone" data-grid-id="7-3"></div><div class="target-zone" data-grid-id="7-4"></div><div class="target-zone" data-grid-id="7-5"></div><div class="target-zone" data-grid-id="7-6"></div><div class="target-zone" data-grid-id="7-7"></div></div></div>
<script>
    const colors = {
        'center': '#0000ff',
        'default': '#f0f0f0',
        'connected': '#ff0000',
        'hovered': '#00ff00',
    };
    const arrowTypes = ['single', 'double', 'triple', 'none'];
    const arrows = {
        '↑': 'single',
        '↗': 'single',
        '→': 'single',
        '↘': 'single',
        '↓': 'single',
        '↙': 'single',
        '←': 'single',
        '↖': 'single'
    };
    const connectionAreas = {
        '↖-single': [[3, 3]],
        '↑-single': [[3, 4]],
        '↗-single': [[3, 5]],
        '←-single': [[4, 3]],
        '→-single': [[4, 5]],
        '↙-single': [[5, 3]],
        '↓-single': [[5, 4]],
        '↘-single': [[5, 5]],
        '↖-double': [[2, 2], [2, 3], [3, 2], [3, 3]],
        '↑-double': [[3, 4], [2, 4]],
        '↗-double': [[2, 5], [3, 5], [2, 6], [3, 6]],
        '←-double': [[4, 3], [4, 2]],
        '→-double': [[4, 5], [4, 6]],
        '↙-double': [[5, 3], [6, 2], [6, 3], [5, 2]],
        '↓-double': [[5, 4], [6, 4]],
        '↘-double': [[5, 5], [6, 6], [6, 5], [5, 6]],
        '↖-triple': [[1, 1], [1, 2], [1, 3], [2, 1], [3, 1], [2, 2], [3, 2], [2, 3], [3, 3]],
        '↑-triple': [[3, 4], [2, 4], [1, 4]],
        '↗-triple': [[1, 5], [1, 6], [1, 7], [2, 5], [3, 5], [2, 6], [3, 6], [2, 7], [3, 7]],
        '←-triple': [[4, 3], [4, 2], [4, 1]],
        '→-triple': [[4, 5], [4, 6], [4, 7]],
        '↙-triple': [[5, 3], [6, 2], [7, 1], [6, 3], [7, 2], [7, 3], [5, 2], [5, 1], [6, 1]],
        '↓-triple': [[5, 4], [6, 4], [7, 4]],
        '↘-triple': [[5, 5], [6, 6], [7, 7], [6, 5], [7, 5], [7, 6], [5, 6], [5, 7], [6, 7]],
    };
    document.querySelectorAll('.target-arrow').forEach(arrow => {
        const arrowId = arrow.dataset.arrowId;
        arrow.addEventListener('click', () => {
            const target = document.querySelector('.target-center');
            const arrowType = arrows[arrowId];
            const nextArrowType = arrowTypes[(arrowTypes.indexOf(arrowType) + 1) % arrowTypes.length];

            arrow.textContent = (nextArrowType === 'none') ? '·' : arrowId;
            arrows[arrowId] = nextArrowType;
            arrow.classList.remove(`${arrowId}-${arrowType}`);
            arrow.classList.add(`${arrowId}-${nextArrowType}`);

            recolorZones();
            arrow.dispatchEvent(new Event('mouseover'));
        });
        arrow.addEventListener('mouseover', () => {
            const arrowType = arrows[arrowId];
            recolorZones();
            updateArrow(arrow, colors.hovered);
            connectionAreas[`${arrowId}-${arrowType}`].forEach(([i, j]) => {
                const zone = document.querySelector(`.target-zone[data-grid-id="${i}-${j}"]`);
                updateZone(zone, colors.hovered);
            });
        });
        arrow.addEventListener('mouseout', () => {
            recolorZones();
        });
    });

    const isConnected = (gridId) => {
        const allConnected = Object.entries(arrows)
            .flatMap(([arrow, type]) => connectionAreas[`${arrow}-${type}`] ?? []);
        return allConnected.some(([i, j]) => `${i}-${j}` === gridId);
    };

    const recolorArrows = () => {
        document.querySelectorAll('.target-arrow').forEach(arrow => {
            updateArrow(arrow, colors.default);
        });
    };

    const recolorZones = () => {
        recolorArrows();

        const zones = document.querySelectorAll('.target-zone');
        for (const zone of zones) {
            const gridId = zone.dataset.gridId;
            const color = isConnected(gridId) ? 'connected' : 'default';
            updateZone(zone, colors[color]);
        }
    };

    const updateArrow = (arrow, color) => {
        arrow.style.color = color;
    };

    const updateZone = (zone, color) => {
        zone.style.borderColor = color;
        zone.style.backgroundColor = `${color}20`;
    };

    updateZone(document.querySelector('.target-center'), colors.center);
    recolorZones();
</script>
<style>
    .target-grid {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
    }

    .target-row {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 4px;
    }

    .target-zone, .target-center {
        width: 80px;
        height: 80px;
        border: 2px solid;
    }

    .target-center {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: 4px;
    }

    .arrows-row {
        display: flex;
        justify-content: space-between;
    }

    .arrows-row p {
        font-size: 16px;
        margin: 0;
        line-height: 80%;
    }

    .target-arrow {
        position: relative;
        cursor: pointer;
        min-width: 12px;
        text-align: center;
    }.↖-double::after, .↖-triple::after {
        content: '↖';
        position: absolute;
        top: 3px;
        left: 3px;
    }

    .↖-triple::before {
        content: '↖';
        position: absolute;
        top: 6px;
        left: 6px;
    }.↑-double::after, .↑-triple::after {
        content: '↑';
        position: absolute;
        top: 3px;
        left: 0px;
    }

    .↑-triple::before {
        content: '↑';
        position: absolute;
        top: 6px;
        left: 0px;
    }.↗-double::after, .↗-triple::after {
        content: '↗';
        position: absolute;
        top: 3px;
        left: -3px;
    }

    .↗-triple::before {
        content: '↗';
        position: absolute;
        top: 6px;
        left: -6px;
    }.←-double::after, .←-triple::after {
        content: '←';
        position: absolute;
        top: 0px;
        left: 3px;
    }

    .←-triple::before {
        content: '←';
        position: absolute;
        top: 0px;
        left: 6px;
    }.·-double::after, .·-triple::after {
        content: '·';
        position: absolute;
        top: 0px;
        left: 0px;
    }

    .·-triple::before {
        content: '·';
        position: absolute;
        top: 0px;
        left: 0px;
    }.→-double::after, .→-triple::after {
        content: '→';
        position: absolute;
        top: 0px;
        left: -3px;
    }

    .→-triple::before {
        content: '→';
        position: absolute;
        top: 0px;
        left: -6px;
    }.↙-double::after, .↙-triple::after {
        content: '↙';
        position: absolute;
        top: -3px;
        left: 3px;
    }

    .↙-triple::before {
        content: '↙';
        position: absolute;
        top: -6px;
        left: 6px;
    }.↓-double::after, .↓-triple::after {
        content: '↓';
        position: absolute;
        top: -3px;
        left: 0px;
    }

    .↓-triple::before {
        content: '↓';
        position: absolute;
        top: -6px;
        left: 0px;
    }.↘-double::after, .↘-triple::after {
        content: '↘';
        position: absolute;
        top: -3px;
        left: -3px;
    }

    .↘-triple::before {
        content: '↘';
        position: absolute;
        top: -6px;
        left: -6px;
    }</style>

    </main>
    <footer>
        <p>&copy; 2024 Dimensional Rift</p>
    </footer>
    
</body>

</html>